{% extends 'base.html'%}

{% block content %}
{{ form.media }}

  {% load widget_tweaks %}
<div class="row">

  <form method="post">
    {% csrf_token %}
    {% for field in form.visible_fields %}
      {% if field.id_for_label == "id_koppel_eenheid_aan_alle_producten_binnen_deze_categorie" %}
       <label for="{{ field.id_for_label }}">{{ field.label }}</label>: {{ field }}
      {% else %}
          <div class="mb-3">
              <div class="form-group">
                <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                {{ field|add_class:'form-control' }}
                {% for error in field.errors %}
                  <span class="help-block">{{ error }}</span>
                {% endfor %}
              </div>
          </div>
      {% endif %}
    {% endfor %}

    <div class="form-group">
      <button type="submit" class="btn btn-success">
        <span class="glyphicon glyphicon-ok"></span> Save
      </button>
    </div>
    </form>
     <table class="table">
         <thead class="thead-light">
             <tr>
                 <th scope="col">Patient ID</th>
                 <th scope="col">Datum & tijd</th>
                 <th scope="col">Product</th>
                 <th scope="col">Hoeveelheid (gram)</th>
                 <th scope="col">Delete</th>
             </tr>
         </thead>
         <tbody>
        {% for date, dagdelen in food_records_grouped.items %}
            <tr><th colspan="5" class="text-center">{{ date }}</th></tr>

            {% for dagdeel, food_records in dagdelen.items %}
                <tr><th></th><th colspan="4">{{ dagdeel }}</th></tr>

                {% for food_record in food_records %}
                     <tr>
                         <td>{{food_record.patient_id}}</td>
                         <td>{{food_record.datetime}}</td>
                         <td>{{food_record.product}}</td>
                         <td>{{food_record.amount}}</td>
                         <td><a href="/{{food_record.id}}"><span class="glyphicon glyphicon-remove"></span></a></td></tr>
                {% endfor %}
            {% endfor %}
         {% endfor %}
         </tbody>
         </table>
</div>
{% endblock %}